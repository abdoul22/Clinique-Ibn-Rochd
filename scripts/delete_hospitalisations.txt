// =================================================================
// SCRIPT TINKER - Suppression TOTALE des hospitalisations
// Copiez-collez directement dans: php artisan tinker
// ATTENTION: Supprime TOUTES les hospitalisations et leurs charges !
// =================================================================

// Voir statistiques avant suppression
echo "=== AVANT SUPPRESSION ===\n";
echo "Hospitalisations: " . \App\Models\Hospitalisation::count() . "\n";
echo "Charges hospitaliÃ¨res: " . \App\Models\HospitalisationCharge::count() . "\n";
echo "SÃ©jours en chambre: " . \App\Models\HospitalizationRoomStay::count() . "\n";
echo "Lits occupÃ©s: " . \App\Models\Lit::where('statut', 'occupÃ©')->count() . "\n";

// Ã‰tape 1: Supprimer les charges d'hospitalisation
$chargesDeleted = \App\Models\HospitalisationCharge::count();
\App\Models\HospitalisationCharge::truncate();
echo "\nðŸ—‘ï¸ Charges supprimÃ©es: " . $chargesDeleted . "\n";

// Ã‰tape 2: Supprimer les sÃ©jours en chambre
$roomStaysDeleted = \App\Models\HospitalizationRoomStay::count();
\App\Models\HospitalizationRoomStay::truncate();
echo "ðŸ—‘ï¸ SÃ©jours supprimÃ©s: " . $roomStaysDeleted . "\n";

// Ã‰tape 3: LibÃ©rer tous les lits occupÃ©s
$litsLiberes = \App\Models\Lit::where('statut', 'occupÃ©')->update(['statut' => 'libre']);
echo "ðŸ›ï¸ Lits libÃ©rÃ©s: " . $litsLiberes . "\n";

// Ã‰tape 4: Supprimer toutes les hospitalisations
$hospitalisationsDeleted = \App\Models\Hospitalisation::count();
\App\Models\Hospitalisation::truncate();
echo "ðŸ—‘ï¸ Hospitalisations supprimÃ©es: " . $hospitalisationsDeleted . "\n";

// Statistiques finales
echo "\n=== APRÃˆS SUPPRESSION ===\n";
echo "Hospitalisations: " . \App\Models\Hospitalisation::count() . "\n";
echo "Charges hospitaliÃ¨res: " . \App\Models\HospitalisationCharge::count() . "\n";
echo "SÃ©jours en chambre: " . \App\Models\HospitalizationRoomStay::count() . "\n";
echo "Lits occupÃ©s: " . \App\Models\Lit::where('statut', 'occupÃ©')->count() . "\n";

// VÃ©rifier que les autres modules sont prÃ©servÃ©s
echo "\n=== MODULES PRÃ‰SERVÃ‰S ===\n";
echo "Patients: " . \App\Models\GestionPatient::count() . "\n";
echo "MÃ©decins: " . \App\Models\Medecin::count() . "\n";
echo "Services: " . \App\Models\Service::count() . "\n";
echo "Chambres: " . \App\Models\Chambre::count() . "\n";
echo "Lits: " . \App\Models\Lit::count() . "\n";
echo "Factures: " . \App\Models\Caisse::count() . "\n";

echo "\nâœ… SUPPRESSION TERMINÃ‰E !\n";













